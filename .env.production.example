# ─── StarkDCA — Production Environment Variables (EXAMPLE) ───────────
# Copy to .env and fill in values. NEVER commit .env to git.
#
# Required: All vars without defaults are mandatory.
# See apps/backend/src/config/index.ts for Zod validation schema.
# ─────────────────────────────────────────────────────────────────────

# ─── Core ─────────────────────────────────────────────────────────────
NODE_ENV=production
PORT=4000

# ─── Database (PostgreSQL) ────────────────────────────────────────────
# REQUIRED | Secret: YES | Set on: Render env vars
# Format: postgresql://user:password@host:port/dbname
DATABASE_URL=postgresql://user:password@host:5432/starkdca

# ─── Redis (Upstash) ─────────────────────────────────────────────────
# REQUIRED | Secret: YES | Set on: Render env vars
# Use rediss:// for TLS (Upstash). Get from: https://console.upstash.com
REDIS_URL=rediss://default:PASSWORD@HOST:6379

# ─── JWT ──────────────────────────────────────────────────────────────
# REQUIRED | Secret: YES | Min 32 chars | Set on: Render env vars
# Generate: openssl rand -hex 32
JWT_ACCESS_SECRET=
JWT_REFRESH_SECRET=
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# ─── Bcrypt ──────────────────────────────────────────────────────────
BCRYPT_ROUNDS=12

# ─── Google OAuth ─────────────────────────────────────────────────────
# REQUIRED for Google login | Secret: CLIENT_SECRET
# Create at: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_CALLBACK_URL=https://YOUR-API-DOMAIN.onrender.com/api/v1/auth/google/callback

# ─── CORS / Frontend ─────────────────────────────────────────────────
# REQUIRED | Set on: Render env vars
# Your Vercel frontend URL (no trailing slash)
CORS_ORIGIN=https://your-app.vercel.app
FRONTEND_URL=https://your-app.vercel.app

# ─── Starknet ─────────────────────────────────────────────────────────
# Optional until DCA execution is enabled
# Secret: EXECUTOR_PRIVATE_KEY is SECRET
STARKNET_RPC_URL=https://starknet-sepolia.public.blastapi.io
DCA_CONTRACT_ADDRESS=0x0
EXECUTOR_PRIVATE_KEY=0x0
EXECUTOR_ADDRESS=0x0

# ─── Email (SMTP) ────────────────────────────────────────────────────
# REQUIRED for OTP emails | Secret: SMTP_PASS
EMAIL_PROVIDER=nodemailer
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SENDGRID_API_KEY=
EMAIL_FROM_NAME=StarkDCA
EMAIL_FROM_ADDRESS=noreply@starkdca.com

# ─── Price API (CoinGecko) ──────────────────────────────────────────
# Optional | Secret: API key is sensitive
PRICE_API_URL=https://api.coingecko.com/api/v3
PRICE_API_KEY=

# ─── Cron / Worker ───────────────────────────────────────────────────
DCA_CRON_SCHEDULE=*/1 * * * *
# Set ENABLE_CRON=false on the web service; leave unset on the worker
# ENABLE_CRON=false

# ─── Rate Limiting ───────────────────────────────────────────────────
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ─── Cache TTLs (seconds) ────────────────────────────────────────────
PRICE_CACHE_TTL=60
PLAN_CACHE_TTL=30
IDEMPOTENCY_TTL=86400
DISTRIBUTED_LOCK_TTL=30
